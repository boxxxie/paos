# PAOS

---

> Lightweight and easy-to-use library to build SOAP clients from WSDL file.

# Intro

Welcome to PAOS! This is lightweight clojure library that enables to build rich SOAP interfaces from WSDL file without bringing in extra complexity like Java interop with autogenerated java classes. PAOS is a wrapper for awesome [soap-ws](https://github.com/reficio/soap-ws).

# Rationale

The main goal for PAOS is to bring flexible and easy-to-use way of communicating with web services accessible via SOAP protocol. Typically, these services provide a WSDL document that describes all available sub-services with a list of possible answers in the form of a structured description of data types. If you have ever worked with such documents, you most likely know how great the possibilities can be described in it (and how difficult it is to work with them without special tools). For Clojure almost all the variants that can be found on Internet usually lead to the generation of Java classes with the help of tools such as wsdl2java or axis2. With PAOS, you no longer have to bother with fine-tuning super flexible professional tools every time a random letter has changed in your WSDL.

# When should you use PAOS?

- If your project works with dynamically changing services
- Your project need to be able to establish communication with new service on the fly
- If you do not want to dive into the abyss of Java interop with often not optimally generated classes
- You need to somehow customize the messages sent to the service

# What is supported?

All that [soap-ws](https://github.com/reficio/soap-ws) supports. If not â€“ please let me now.

# Installation

Because soap-ws depends on a list of external dependencies that are not published in clojars or maven, you need to add them to the project's repository list yourself.

## leiningen

    {...
     :repositories [["reficio" "http://repo.reficio.org/maven/"]
                    ["soapui" "http://www.soapui.org/repository/maven2"]
                    ["enonic" "http://repo.enonic.com/public/"]
                    ...]
     :dependencies [[io.xapix/paos "0.1.0"]
                    ...]
    }

## boot

    (set-env! :repositories #(conj % ["reficio" {:url "http://repo.reficio.org/maven/"}]
                                     ["soapui" {:url "http://www.soapui.org/repository/maven2"}]
                                     ["enonic" {:url "http://repo.enonic.com/public/"}])
              :dependencies #(conj % [io.xapix/paos "0.1.0"])

## deps.edn

    {...
     :mvn/repos {"reficio"  {:url "http://repo.reficio.org/maven/"}
                 "soapui"   {:url "http://www.soapui.org/repository/maven2"}
                 "enonic"   {:url "http://repo.enonic.com/public/"}
                 "central"  {:url "https://repo1.maven.org/maven2/"}
                 "clojars"  {:url "https://clojars.org/repo/"}
                 "sonatype" {:url "https://oss.sonatype.org/content/repositories/snapshots/"}}}
     :deps {io.xapix/paos {:mvn/version "0.1.0"}
            ...}
    ...
    }

# Quick start guide

Require `paos.wsdl` namespace:

    (require '[paos.wsdl :as wsdl])

And process WSDL using function `wsdl/parse`

    ;; You can use external urls
    (def soap-service (wsdl/parse "http://example.com/some/wsdl/file?wsdl"))

    ;; Or absolute file path
    (def soap-service (wsdl/parse "/some/place/service.wsdl"))

    ;; Or just pass the content of WSDL file as a string
    (def soap-service (wsdl/parse "<SomeServise>"))

All service bindings should be visible as a top-level keywords with all operations inside.

    soap-service ;; => {"SomeServiceBinding" {"operation1" ...
                                              "operation2" ...}
                        "AnotherServiceBinding" {"operation3" ...
                                                 "operation4" ...}}

Each operation is an object with implemented paos.service/Service methods
